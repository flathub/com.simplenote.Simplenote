app-id: com.simplenote.Simplenote
base: org.electronjs.Electron2.BaseApp
base-version: '20.08'
runtime: org.freedesktop.Platform
runtime-version: '20.08'
sdk: org.freedesktop.Sdk
separate-locales: false
command: simplenote
finish-args:
  - --socket=x11
  - --socket=wayland
  - --device=dri
  - --share=ipc
  - --share=network
  - --socket=cups
  - --filesystem=xdg-config/Simplenote
  - --filesystem=xdg-documents
  - --talk-name=org.freedesktop.secrets
cleanup:
  - /include
  - /lib/*.a
  - /lib/*.la
  - /lib/pkgconfig
  - /share/man
modules:

  - shared-modules/libsecret/libsecret.json

  - name: simplenote
    buildsystem: simple
    sources:
      - type: file
        path: com.simplenote.Simplenote.appdata.xml
      - type: file
        path: com.simplenote.Simplenote.desktop
      - type: file
        path: com.simplenote.Simplenote.png
      - type: file
        url: https://github.com/Automattic/simplenote-electron/releases/download/v1.21.1/Simplenote-linux-1.21.1-x64.tar.gz
        sha256: 39ffd1a5d5d9310ce149c9bb47e58e3ed7605bd5bdbf83b5eb22653c3070e3c2
        dest-filename: Simplenote.tar.gz
      - type: script
        dest-filename: simplenote
        commands:
          - "exec env TMPDIR=$XDG_CACHE_HOME zypak-wrapper /app/Simplenote/simplenote \"$@\""
    build-commands:
      - mkdir -p /app/Simplenote
      - tar zxf Simplenote.tar.gz --strip-components=1 -C /app/Simplenote
      - install -D simplenote /app/bin/simplenote
      - install -Dm 644 com.simplenote.Simplenote.appdata.xml -t /app/share/appdata
      - install -Dm 644 com.simplenote.Simplenote.desktop -t /app/share/applications
      - install -Dm 644 com.simplenote.Simplenote.png -t /app/share/icons/hicolor/256x256/apps
